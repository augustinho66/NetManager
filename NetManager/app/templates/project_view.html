{% extends "base.html" %}

{% block title %}{{ project.name }} - NetManager{% endblock %}

{% block content %}
<div class="card shadow">
    <div class="card-body">
        <h2 class="mb-4">
            <i class="fas fa-project-diagram me-2"></i>{{ project.name }}
        </h2>

        <div class="row mb-4">
            <div class="col-md-6">
                <p><strong>Criado:</strong> {{ project.created_at.strftime('%d/%m/%Y %H:%M') }}</p>
                <p><strong>Observações:</strong></p>
                <p>{{ project.notes or 'Nenhuma' }}</p>
            </div>
            <div class="col-md-6">
                <p><strong>Dispositivos:</strong> {{ project.devices|length }}</p>
                <a href="{{ url_for('projects.edit_project', pid=project.id) }}" class="btn btn-primary">
                    <i class="fas fa-edit me-1"></i>Editar Projeto
                </a>
                <a href="{{ url_for('projects.gerar_relatorio', pid=project.id) }}" class="btn btn-info">
                    <i class="fas fa-file-pdf me-1"></i>Gerar Relatório
                </a>
            </div>
        </div>

        {% if project.map_filename %}
        <hr>
        <h5>Mapa do Projeto:</h5>
        <img src="{{ url_for('projects.uploaded_file', filename=project.map_filename) }}" class="img-fluid" style="max-width: 100%;">
        {% endif %}
    </div>
</div>

<div class="card shadow mt-4">
    <div class="card-header bg-info text-white">
        <h5 class="mb-0"><i class="fas fa-list me-2"></i>Dispositivos Configurados</h5>
    </div>
    <div class="card-body">
        {% if project.devices %}
        <table class="table">
            <thead>
                <tr>
                    <th>Nome</th>
                    <th>Tipo</th>
                    <th>IP</th>
                    <th>MAC</th>
                    <th>Gateway</th>
                    <th>DNS</th>
                </tr>
            </thead>
            <tbody>
                {% for device in project.devices %}
                <tr>
                    <td>{{ device.name or '-' }}</td>
                    <td>{{ device.device_type }}</td>
                    <td>{{ device.ip or '-' }}</td>
                    <td>{{ device.mac or '-' }}</td>
                    <td>{{ device.gateway or '-' }}</td>
                    <td>{{ device.dns or '-' }}</td>
                </tr>
                {% endfor %}
            </tbody>
        </table>
        {% else %}
        <p class="text-muted">Nenhum dispositivo configurado</p>
        {% endif %}
    </div>
</div>
{% endblock %}

